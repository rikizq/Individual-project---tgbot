Когда пользователь отправляет запрос, бот формирует GET-запрос на https://itunes.apple.com/search, передавая параметры term (поисковая фраза), entity=song (тип — песни), limit (количество результатов) и country=RU (регион).

API возвращает ответ в формате JSON со списком треков из каталога iTunes Store / Apple Music. Бот извлекает из каждого результата название трека (trackName), исполнителя (artistName) и ссылку previewUrl. Далее через answer_audio отправляется 30-секундный фрагмент пользователю в Telegram.

Если результаты отсутствуют или возникает ошибка запроса, бот сообщает, что ничего не найдено.